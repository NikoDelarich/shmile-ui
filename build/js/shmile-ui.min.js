var CameraUtils=function(){};CameraUtils.snap=function(t,e){p.zoomFrame(t,"in"),p.modalMessage("Ready?",Config.ready_delay,200,function(){p.modalMessage("3",1e3,200,function(){p.modalMessage("2",1e3,200,function(){p.modalMessage("1",1e3,200,function(){e()})})})})},CameraUtils.scale4x6=function(t,e){return 1.5<=t/e?{w:6*e/4,h:e}:{w:t,h:4*t/6}},CameraUtils.scale4x1=function(t,e){return 1.5<=t/e?{w:4*e/6*.5,h:e}:{w:t,h:6*t/4*.5}},CameraUtils.scale3x8=function(t,e){return 8/3<=t/e?{w:e*(8/3),h:e}:{w:t,h:.375*t}},CameraUtils.scale=function(t,e,o){return o<=t/e?{w:e*o,h:e}:{w:t,h:t*(1/o)}};var Config={photo_margin:50,window_width:$(window).width(),window_height:$(window).height()-10,overlay_delay:2e3,next_delay:1e4,cheese_delay:400,flash_duration:1e3,ready_delay:2e3,nice_delay:5e3,between_snap_delay:1e3,is_mobile:!1},AppState=function(){this.reset()};AppState.prototype.reset=function(){this.current_frame_idx=0,this.zoomed=null};var ShmileStateMachine=function(t,e,o,i,n,s){this.photoView=t,this.socket=e,this.appState=o,this.config=i,this.buttonView=n,this.snackbar=s;var a=this;this.buttonPrint=null,this.shouldSendNotPrinting=!1,a.socket.on("printer_enabled",function(t){console.log("socket printer_enabled received, optionalPrinting is"+t),t?(a.shouldSendNotPrinting=!0,a.fsm.show_print_message(),a.buttonPrint=setTimeout(function(){a.fsm.show_message()},a.config.next_delay)):(a.socket.emit("print"),setTimeout(function(){a.fsm.print_set()},a.config.next_delay))}),a.socket.on("review_composited",function(){setTimeout(function(){a.fsm.show_message()},a.config.next_delay)}),a.socket.on("print",function(){a.fsm.print_set()}),this.fsm=StateMachine.create({initial:"loading",events:[{name:"connected",from:"loading",to:"ready"},{name:"ui_button_pressed",from:"ready",to:"waiting_for_photo"},{name:"photo_saved",from:"waiting_for_photo",to:"review_photo"},{name:"photo_updated",from:"review_photo",to:"next_photo"},{name:"continue_partial_set",from:"next_photo",to:"waiting_for_photo"},{name:"finish_set",from:"next_photo",to:"review_composited"},{name:"show_print_message",from:"review_composited",to:"print_message"},{name:"print_set",from:["print_message","review_composited"],to:"printing"},{name:"print_not_ok",from:"printing",to:"show_error_message"},{name:"show_message",from:["review_composited","print_message","printing","show_error_message"],to:"show_goodbye_message"},{name:"next_set",from:"show_goodbye_message",to:"ready"}],callbacks:{onconnected:function(){console.log("onconnected"),a.photoView.animate("in",function(){a.buttonView.fadeIn()})},onenterready:function(){a.shouldSendNotPrinting=!1,a.photoView.resetState()},onleaveready:function(){},onenterwaiting_for_photo:function(t){cheeseCb=function(){a.photoView.modalMessage("Cheese!",a.config.cheese_delay),a.photoView.flashStart(),a.socket.emit("snap",!0)},CameraUtils.snap(a.appState.current_frame_idx,cheeseCb)},onphoto_saved:function(t,e,o,i){a.photoView.flashEnd(),a.photoView.updatePhotoSet(i.web_url,a.appState.current_frame_idx,function(){setTimeout(function(){a.fsm.photo_updated()},a.config.between_snap_delay)})},onphoto_updated:function(t,e,o){a.photoView.flashEnd();var i=a.photoView.getPicturesTotal();a.appState.current_frame_idx==i-1?a.fsm.finish_set():(a.appState.current_frame_idx=(a.appState.current_frame_idx+1)%i,a.fsm.continue_partial_set())},onenterreview_composited:function(t,e,o){a.socket.emit("composite"),a.photoView.showOverlay(!0)},onenterprinting:function(t,e,o){clearTimeout(a.buttonPrint),a.shouldSendNotPrinting=!1,setTimeout(function(){a.fsm.show_message()},a.config.between_snap_delay)},onentershow_goodbye_message:function(t,e,o){a.fsm.next_set(),a.snackbar.hideMe(),a.shouldSendNotPrinting&&a.socket.emit("do_not_print")},onenterprint_message:function(t,e,o){a.snackbar.showMe()},onleaveshow_goodbye_message:function(t,e,o){a.photoView.animate("out"),a.photoView.modalMessage("Nice!",a.config.nice_delay,200,function(){a.photoView.slideInNext()})},onchangestate:function(t,e,o){console.log("fsm received event "+t+", changing state from "+e+" to "+o)}}})},SocketProxy=function(){this.socket=null,this.fakeSocket={},_.extend(this.fakeSocket,Backbone.Events)};SocketProxy.prototype.lateInitialize=function(t){this.socket=t},SocketProxy.prototype.on=function(t,e){if(null===this.socket)return console.log("SocketProxy 'on' delegating to fakeSocket"),void this.fakeSocket.on(t,e);this.socket.on(t,e)},SocketProxy.prototype.emit=function(t,e){if(null===this.socket)return console.log("SocketProxy 'emit' delegating to fakeSocket"),void this.fakeSocket.trigger(t,function(){console.log(e)});this.socket.emit(t,e)};var SocketLayer=function(t,e){this.io=t,this.proxy=e};SocketLayer.prototype.init=function(){try{this.socket=this.io.connect("/"),this.proxy.lateInitialize(this.socket)}catch(t){console.log("Error initializing socket connection: "+t)}return this},SocketLayer.prototype.register=function(t){console.log("register"),this.fsm=t;var e=this;this.proxy.on("message",function(t){console.log("message evt: data is:"+t)}),this.proxy.on("connect",function(){console.log("connected evt"),e.fsm.connected()}),this.proxy.on("camera_snapped",function(){console.log("camera_snapped evt")}),this.proxy.on("photo_saved",function(t){console.log("photo_saved evt: "+t.filename),e.fsm.photo_saved(t)})};var PhotoView=Backbone.View.extend({id:"#viewport",initialize:function(t,e){this.config=t,this.paper=new Raphael("viewport",this.config.window_width,this.config.window_height),this.frames=this.paper.set(),this.images=this.paper.set(),this.all=this.paper.set(),this.overlayImage=null,this.compositeDim=null,this.compositeOrigin=null,this.compositeCenter=null,this.state=e},render:function(t){this.translationTotal={dx:0,dy:0},this.photoViewLayout=new window[t.photoView](this.config);var e=this.config.window_width-this.config.photo_margin,o=this.config.window_height-this.config.photo_margin;this.compositeDim=CameraUtils.scale(e,o,this.photoViewLayout.finalSizeRatio),this.compositeOrigin={x:(this.config.window_width-this.compositeDim.w)/2,y:(this.config.window_height-this.compositeDim.h)/2},this.compositeCenter={x:this.compositeOrigin.x+this.compositeDim.w/2,y:this.compositeOrigin.y+this.compositeDim.h/2};var i=this.paper.rect(this.compositeOrigin.x,this.compositeOrigin.y,this.compositeDim.w,this.compositeDim.h);i.attr({fill:"white"}),this.all.push(i);var n={compositeDim:this.compositeDim,paper:this.paper,compositeOrigin:this.compositeOrigin,frames:this.frames,images:this.images,all:this.all};this.frameDim=this.photoViewLayout.render(n),this.setOverlay(t.overlayImage),this.all.translate(-this.config.window_width,0)},toString:function(){return ret=[],ret.push("Size of 'all' set: "+this.all.length),ret.push("Size of 'frames' set: "+this.frames.length),ret.push("Composite photo is: "+this.all[0].attr("width")+"x"+this.all[0].attr("height")),ret.push("Frame photo is: "+this.frameDim.w+"x"+this.frameDim.h),ret.join("\n")},updatePhotoSet:function(t,e,o){var i=this,n=i.images[e],s=i.frames[e];console.log("idx = "+e),n.attr({src:t,opacity:0}),n.show();n.animate({opacity:1},200,function(){s.hide(),p.zoomFrame(e,"out",o)})},animate:function(t,e){"in"===t?(this.overlayImage&&this.overlayImage.hide(),this.all.animate({translation:this.config.window_width+",0"},1e3,"<>",e)):"out"===t&&this.all.animate({translation:this.config.window_width+",0"},1e3,"<>",e)},zoomFrame:function(t,e,o){if("out"===e&&this.state.zoomed||"in"===e&&!this.state.zoomed){var i=this,n=i.frames[t],s=n.attr("x"),a=n.attr("width"),r=n.attr("y"),h=n.attr("height"),c=s+a/2,p=r+h/2,l=this.compositeCenter.x-c,m=this.compositeCenter.y-p;if("out"===e&&this.state.zoomed)i.translationTotal.dx-=this.state.zoomed.dx,i.translationTotal.dy-=this.state.zoomed.dy,i.all.animate({scale:[1,1,i.compositeCenter.x,i.compositeCenter.y].join(",")},1e3,"bounce",function(){t==i.photoViewLayout.totalPictures-1?i.all.animate({translation:i.translationTotal.dx+","+i.translationTotal.dy},1e3,"<>",o):o()}),this.state.zoomed=null;else if("out"!==e){var f=this.compositeDim.h/h;i.all.animate({translation:l+","+m},1e3,"<>",function(){i.all.animate({scale:[f,f,i.compositeCenter.x,i.compositeCenter.y].join(",")},1e3,"bounce",o)}),this.state.zoomed={dx:l,dy:m}}}},calculateOutTranslation:function(t,e,o){var i=this;i.shouldRestoreOutState?i.all.animate({translation:[-e.dx,-e.dy].join(",")},1e3,"<>",o):(i.translationTotal.dx-=e.zoomed.dx,i.translationTotal.dy-=e.zoomed.dy,t==i.totalPictures-1?i.all.animate({translation:i.translationTotal.dx+","+i.translationTotal.dy},1e3,"<>",o):o())},slideInNext:function(){this.resetState(),this.modalMessage("Next!"),this.images.hide(),this.frames.show(),this.translationTotal.dx=0,this.translationTotal.dy=0,this.all.translate(2*-this.config.window_width,0),this.animate("in",function(){$("#start-button").fadeIn()})},resetState:function(){this.state.reset()},flashEffect:function(t){void 0===t&&(t=200);var e=this.paper.rect(0,0,this.config.window_width,this.config.window_height);e.attr({fill:"white",opacity:0}),e.animate({opacity:1},t,">",function(){e.animate({opacity:0},t,"<"),e.remove()})},flashStart:function(t){void 0===t&&(t=200),this.rect=this.paper.rect(0,0,this.config.window_width,this.config.window_height),this.rect.attr({fill:"white",opacity:0}),this.rect.animate({opacity:1},t,">")},flashEnd:function(t){void 0===t&&(t=200);var e=this;this.rect.animate({opacity:0},t,"<",function(){e.remove()})},modalMessage:function(t,e,o,i){if(void 0===o)var o=200;if(void 0===e)var e=500;var n=.3*this.config.window_height,s=(this.config.window_width-n)/2,a=(this.config.window_height-n)/2,r=this.paper.set(),h=this.paper.rect(s,a,n,n,15);h.attr({fill:"#222","fill-opacity":.7,"stroke-color":"white"}),r.push(h);var c=this.paper.text(s+n/2,a+n/2,t);c.attr({fill:"white","font-size":"50","font-weight":"bold"}),r.push(c),r.attr({opacity:0}),r.animate({opacity:1,scale:"1.5,1.5","font-size":"70"},o,">");setTimeout(function(t){c.remove(),h.remove(),i&&i()},e,r)},showOverlay:function(t){this.overlayImage.show(),t&&this.overlayImage.animate({opacity:1},this.config.overlay_delay)},hideOverlay:function(t){var e=this;t?this.overlayImage.animate({opacity:0},this.config.overlay_delay,function(){e.overlayImage.hide()}):this.overlayImage.hide()},setOverlay:function(t){var e=this.paper.image(t,this.compositeOrigin.x,this.compositeOrigin.y,this.compositeDim.w,this.compositeDim.h);this.overlayImage||this.all.push(e),e.hide(),this.overlayImage=e},getPicturesTotal:function(){return this.photoViewLayout.totalPictures}}),ButtonView=function(t){this.fsm=t};ButtonView.prototype.render=function(){var t=this;this.startButton=$("button#start-button");var e=(Config.window_width-this.startButton.outerWidth())/2,o=(Config.window_height-this.startButton.outerHeight())/2;this.startButton.hide(),this.startButton.css({top:o,left:e});var i=Config.is_mobile?"touchend":"click";this.startButton.bind(i,function(t){$(t.currentTarget).fadeOut(1e3),$(document).trigger("ui_button_pressed")}),$(document).bind("ui_button_pressed",function(){console.log("ui_button_pressed evt"),t.fsm.ui_button_pressed()})},ButtonView.prototype.fadeIn=function(){this.startButton.fadeIn()},$(window).ready(function(){var t=new SocketProxy,e=new AppState;window.io=window.io||void 0;var o=new SocketLayer(window.io,t);o.init(),window.p=new PhotoView(window.Config,e),bv=new ButtonView,snackbar=new Snackbar(t);var i=new ShmileStateMachine(window.p,t,e,window.Config,bv,snackbar);bv.fsm=i.fsm,window.socketProxy=t,t.on("template",function(t){o.register(i.fsm),bv.render(),snackbar.render(),p.render(t),i.fsm.connected()}),t.on("configsChanged",function(){window.location.reload(!1)})});var Snackbar=function(t){this.socket=t};Snackbar.prototype.render=function(){this.snackbar=document.getElementById("snackbar")},Snackbar.prototype.pressed=function(){this.socket.emit("print"),this.hideMe()},Snackbar.prototype.showMe=function(){"showMe"!==self.snackbar.classClass&&(this.snackbar.className="showMe")},Snackbar.prototype.hideMe=function(){var t=this;"showMe"===t.snackbar.className&&(t.snackbar.className="hideMe",setTimeout(function(){t.snackbar.className=""},2300))};var PortraitOneByFour=function(t){this.photoBorder=0,this.totalPictures=4,this.finalSizeRatio=2/6};PortraitOneByFour.prototype.render=function(t){var e=t.compositeDim,o=t.paper,i=t.compositeOrigin,n=t.frames,s=t.images,a=t.all;this.photoBorder=e.w/50;var r=i.x+this.photoBorder,h=i.y+this.photoBorder,c=e.w-2*this.photoBorder;this.frameDim={w:e.w-2*this.photoBorder,h:4*c/6};var p=o.rect(r,h,this.frameDim.w,this.frameDim.h);p.attr({fill:"black"});var l=o.image(null,r,h,this.frameDim.w,this.frameDim.h);s.push(l),n.push(p),a.push(l),a.push(p);for(var m=0;m<3;m++)p=p.clone(),l=l.clone(),p.translate(0,this.frameDim.h+this.photoBorder),l.translate(0,this.frameDim.h+this.photoBorder),n.push(p),s.push(l),a.push(p),a.push(l);return this.frameDim};var LandscapeTwoByTwo=function(t){this.photoBorder=0,this.totalPictures=4,this.finalSizeRatio=1.5};LandscapeTwoByTwo.prototype.render=function(t){var e=t.compositeDim,o=t.paper,i=t.compositeOrigin,n=t.frames,s=t.images,a=t.all;this.photoBorder=e.w/50;var r=i.x+this.photoBorder,h=i.y+this.photoBorder;this.frameDim={w:(e.w-3*this.photoBorder)/2,h:(e.h-3*this.photoBorder)/2};var c=o.rect(r,h,this.frameDim.w,this.frameDim.h);c.attr({fill:"black"});var p=o.image(null,r,h,this.frameDim.w,this.frameDim.h);return s.push(p),n.push(c),a.push(p),a.push(c),c=c.clone(),p=p.clone(),c.translate(this.frameDim.w+this.photoBorder,0),p.translate(this.frameDim.w+this.photoBorder,0),n.push(c),s.push(p),a.push(c),a.push(p),c=c.clone(),p=p.clone(),c.translate(-(this.frameDim.w+this.photoBorder),this.frameDim.h+this.photoBorder),p.translate(-(this.frameDim.w+this.photoBorder),this.frameDim.h+this.photoBorder),n.push(c),s.push(p),a.push(c),a.push(p),c=c.clone(),p=p.clone(),c.translate(this.frameDim.w+this.photoBorder,0),p.translate(this.frameDim.w+this.photoBorder,0),n.push(c),s.push(p),a.push(c),a.push(p),this.frameDim};var LandscapeOneByThree=function(t){this.totalPictures=3,this.size={w:2e3,h:750},this.frameSize={w:633.33,h:422.22},this.frameSpacing=50,this.finalSizeRatio=8/3};LandscapeOneByThree.prototype.render=function(t){var e=t.compositeDim,o=t.paper,i=t.compositeOrigin,n=t.frames,s=t.images,a=t.all,r=e.h/this.size.h,h={w:r*this.frameSize.w,h:r*this.frameSize.h},c=this.frameSpacing*r,p=o.rect(i.x,i.y+c,h.w,h.h);p.attr({fill:"black",id:"frame0"});var l=o.image(null,i.x,i.y+c,h.w,h.h);s.push(l),n.push(p),a.push(l),a.push(p);for(var m=1;m<3;m++)p=p.clone(),l=l.clone(),p.translate(c+h.w,0),p.attr({id:"frame"+m}),l.translate(c+h.w,0),n.push(p),s.push(l),a.push(p),a.push(l);return h};var SnapOneByFour=function(t){this.config=t,this.paper=Snap(),this.paper.attr({viewBox:[0,0,2e3,750]}),Snap.select("#viewport").append(this.paper),this.totalPictures=3,SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())},Snap.plugin(function(t,e,o,i){function n(t,e,o,i){var n=this.getCursorPoint(o,i),s=this.paper.node.createSVGPoint();s.x=n.x-this.data("op").x,s.y=n.y-this.data("op").y;var a=this.globalToLocal(s);this.transform(this.data("ot").toTransformString()+"t"+[a.x,a.y])}function s(t,e,o){this.data("ibb",this.getBBox()),this.data("op",this.getCursorPoint(t,e)),this.data("ot",this.transform().localMatrix)}e.prototype.hide=function(){this.attr({opacity:0})},e.prototype.show=function(){this.attr({opacity:1})},e.prototype.getCenter=function(){var t=this.getBBox();return{x:t.cx,y:t.cy}},e.prototype.getSize=function(){var t=this.getBBox();return{w:t.width,h:t.height}},e.prototype.getPos=function(){var t=this.getBBox();return{x:t.x,y:t.y}},e.prototype.getTransformRelative=function(t,e,o,i,n){var s=0,a=0;switch(e){case"center":var r=t.getCenter(),h=this.getPos(),c=this.getSize(),s=r.x-c.w/2,a=r.y-c.h/2;s=h.x>s?0-(h.x-s):s-h.x,a=h.y>a?0-(h.y-a):a-h.y;break;case"topleft":p=t.getPos();s=(h=this.getPos()).x>p.x?0-(h.x-p.x):p.x-h.x,a=h.y>p.y?0-(h.y-p.y):p.y-h.y;break;case"bottomleft":p=t.getBBox();s=(h=this.getPos()).x>p.x?0-(h.x-p.x):p.x-h.x,a=h.y>p.y2?0-(h.y-p.y2):p.y2-h.y;break;case"topright":var p=t.getPos(),l=t.getSize(),c=this.getSize();s=(h=this.getPos()).x>p.x?0-(h.x-p.x):p.x-h.x,a=h.y>p.y?0-(h.y-p.y):p.y-h.y,s+=l.w-c.w;break;case"bottomright":var p=t.getBBox(),l=t.getSize(),c=this.getSize();s=(h=this.getPos()).x>p.x2?0-(h.x-p.x2):p.x2-h.x,a=h.y>p.y2?0-(h.y-p.y2):p.y2-h.y;break;case"topcenter":var r=t.getCenter(),m=t.getPos(),h=this.getPos(),c=this.getSize(),s=r.x-c.w/2;s=h.x>s?0-(h.x-s):s-h.x,a=h.y>m.y?0-(h.y-m.y):m.y-h.y;break;case"bottomcenter":var r=t.getCenter(),m=t.getBBox(),h=this.getPos(),c=this.getSize(),s=r.x-c.w/2;s=h.x>s?0-(h.x-s):s-h.x,a=h.y>m.y2?0-(h.y-m.y2):m.y2-h.y;break;case"leftcenter":var r=t.getCenter(),m=t.getPos(),h=this.getPos(),c=this.getSize(),a=r.y-c.h/2;s=h.x>m.x?0-(h.x-m.x):m.x-h.x,a=h.y>a?0-(h.y-a):a-h.y;break;case"rightcenter":var r=t.getCenter(),f=t.getBBox(),h=this.getPos(),c=this.getSize(),a=r.y-c.h/2;s=h.x>f.x2?0-(h.x-f.x2):f.x2-h.x,a=h.y>a?0-(h.y-a):a-h.y;break;default:console.log("ERROR: Unknown transform type in getTransformRelative!")}return void 0===i&&(i=0),void 0===n&&(n=0),s+=i,a+=n,o?"T"+s+","+a:"t"+s+","+a},e.prototype.getCenterPoint=function(t,e){var o=this.paper.node.createSVGPoint(),i=this.getCenter();return o.x=i.x,o.y=i.y,o.matrixTransform(this.paper.node.getScreenCTM().inverse())},e.prototype.globalToLocal=function(t){var e=this.node.getTransformToElement(this.paper.node).inverse();return e.e=e.f=0,t.matrixTransform(e)},e.prototype.zoomToFit=function(){var t=this.getCenterPoint(),e=this.paper.getCenterPoint(),o=this.paper.node.createSVGPoint();o.x=e.x-t.x,o.y=e.y-t.y;var i=this.globalToLocal(o);return this.transform().localMatrix.toTransformString()+"t"+[i.x,i.y]},e.prototype.ztf=function(t){var e=t.getCenterPoint(),o=this.getCursorPoint(e.x,e.y),i=this.globalToLocal(o);return"t"+[i.x,i.y]},e.prototype.getCursorPoint=function(t,e){var o=this.paper.node.createSVGPoint();return o.x=t,o.y=e,o.matrixTransform(this.paper.node.getScreenCTM().inverse())},e.prototype.altDrag=function(){return this.drag(n,s)}})};SnapOneByFour.prototype.render=function(t){var e=this.paper;return Snap.load("/images/drawing.svg",function(o){var i=o.select("svg");if(e.append(i),t){var n=i.select("#layer3");t(n)}}),this.paper},SnapOneByFour.prototype.toString=function(){return ret=[],ret.push("Size of 'all' set: "+this.all.length),ret.push("Size of 'frames' set: "+this.frames.length),ret.push("Composite photo is: "+this.all[0].attr("width")+"x"+this.all[0].attr("height")),ret.push("Frame photo is: "+this.frameDim.w+"x"+this.frameDim.h),ret.join("\n")},SnapOneByFour.prototype.updatePhotoSet=function(t,e,o){var i=this.select("#frame"+(e+1));return[i.clone(),i]},SnapOneByFour.prototype.zoomFrame=function(t,e,o,i){var n=this.paper,s=n.select("#frame"+(t+1)).getBBox(),a=(s.x,s.width),r=(s.y,s.height,s.cx),h=s.cy,c=Snap.select("svg").getBBox(),p={x:c.cx,y:c.cy},l=p.x-r,m=p.y-h,f=c.width/a;return"out"===e&&o.zoomed?(f=1,l=-o.zoomed.dx,m=-o.zoomed.dy,n.animate({transform:"s"+[1,1,p.x,p.y].join(",")},1e3,mina.bounce,function(){n.animate({translation:l+","+m},1e3,mina.easeInOut,i)}),null):"out"!==e?(n.animate({transform:"t"+l+","+m},1e3,mina.easeInOut),{dx:l,dy:m,scaleFactor:f}):void 0},SnapOneByFour.prototype.removeImages=function(){},SnapOneByFour.prototype.createOverlayImage=function(){return this.paper.select("#layer3")};var StripOneByThree=function(t){this.photoBorder=0,this.totalPictures=3,this.skipFrame=0,this.finalSizeRatio=2/6};StripOneByThree.prototype.render=function(t){var e=t.compositeDim,o=t.paper,i=t.compositeOrigin,n=t.frames,s=t.images,a=t.all;this.photoBorder=e.w/50;var r=i.x+this.photoBorder,h=i.y+this.photoBorder,c=e.w-2*this.photoBorder,p={w:c,h:4*c/6},l=o.rect(r,h,p.w,p.h);l.attr({fill:"black"});var m=o.image(null,r,h,p.w,p.h);s.push(m),n.push(l),a.push(m),a.push(l);for(var f=0;f<2;f++)f==this.skipFrame&&(l.translate(0,p.h+this.photoBorder),m.translate(0,p.h+this.photoBorder)),l=l.clone(),m=m.clone(),l.translate(0,p.h+this.photoBorder),m.translate(0,p.h+this.photoBorder),n.push(l),s.push(m),a.push(l),a.push(m);return p};
//# sourceMappingURL=../maps/shmile-ui.js.map
